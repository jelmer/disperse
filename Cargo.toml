[package]
name = "disperse"
version = "0.0.7"
authors = [ "Jelmer VernooÄ³ <jelmer@jelmer.uk>",]
edition = "2021"
description = "automation for creation of releases"
license = "GPL-3.0+"
repository = "https://github.com/jelmer/disperse.git"
homepage = "https://github.com/jelmer/disperse"
build = "build.rs"

[dependencies]
breezyshim = "0.1.20"
chrono = "0.4.31"
crates_io_api = "0.8.1"
lazy-regex = "3.0.1"
pyo3 = { workspace = true }
regex = "1.10.0"
shlex = "1.2.0"
toml_edit = "0.20.2"
protobuf = "3"
log = "0.4.20"
xmlrpc = "0.15.1"
reqwest = { version = "0.11.22", features = ["blocking"] }
url = "2.4.1"
serde_json = "1.0.107"
xdg = "2.5.2"
serde = { version = "1.0.188", features = ["derive"] }
toml = "0.8.2"
clap = { version = "4", features = ["env", "derive"], optional = true }
prometheus = { version = "0.13.3", features = ["reqwest"] }
env_logger = { version = "0.10.0", optional = true }
silver-platter = { git = "https://github.com/jelmer/silver-platter" }
maplit = "1.0.2"
lazy_static = "1.4.0"
octocrab = "0.31.1"

[build-dependencies]
protobuf-codegen = "3"
protoc-rust = "^2.0"

[workspace]
members = ["disperse-py"]

[features]
default = ["cli", "pyo3"]
pyo3 = []
cli = ["dep:clap", "dep:env_logger"]

[workspace.dependencies]
pyo3 = { version = "0.19", features = ["serde"] }

[[bin]]
name = "disperse"
path = "src/bin/disperse.rs"
required-features = ["cli"]

[dev-dependencies]
tempfile = "3.8.1"
pyo3 = { features = ["auto-initialize"] }
